# V9 hashed operation tests for the V9x C extension
# 2009-05-08 <jcw@equi4.com> http://opensource.org/licenses/mit-license.php
# $Id$
# %renumber<^\s*test hashed->%

source [file join [file dirname [info script]] setup.tcl]

test hashed-0 {load and check V9x package} { package require V9x } $version

test hashed-1 {uniqmap operator} {
    v9 get [list uniqmap [v9 ivec 1 2 3 2 2 4]]
} {0 1 2 5}

test hashed-2 {unique operator} {
    v9 get [v9 unique [v9 ivec 1 2 3 2 2 4]]
} {1 2 3 4}

test hashed-3 {exceptmap operator} {
    v9 get [list exceptmap [v9 ivec 1 2 3] [v9 ivec 2 4 5]]
} {0 2}

test hashed-4 {except operator} {
    v9 get [v9 except [v9 ivec 1 2 3] [v9 ivec 2 4 5]]
} {1 3}

test hashed-5 {isectmap operator} {
    v9 get [list isectmap [v9 ivec 1 2 3] [v9 ivec 2 1 5]]
} {0 1}

test hashed-6 {intersect operator} {
    v9 get [v9 intersect [v9 ivec 1 2 3] [v9 ivec 2 1 5]]
} {1 2}

test hashed-7 {revisectmap operator} {
    # returns indices for use as rowmap with second view i.s.o first
    v9 get [list revisectmap [v9 ivec 1 2 3] [v9 ivec 2 5 1]]
} {2 0}

test hashed-8 {union operator} {
    v9 get [v9 union [v9 ivec 1 2 3] [v9 ivec 2 1 5]]
} {1 2 3 5}

cleanup

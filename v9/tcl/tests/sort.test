# V9 view sorting and comparion tests for the V9x C extension
# 2009-05-08 <jcw@equi4.com> http://opensource.org/licenses/mit-license.php
# $Id$
# %renumber<^\s*test sort->%

source [file join [file dirname [info script]] setup.tcl]

test sort-0 {load and check V9x package} { package require V9x } $version

set V [v9 def A,B,C 1 2 3 4 5 6 7 8 9]
set W [v9 def A,B,C 1 2 3 4 5 6 7 8 0]
set X [v9 def A,B,C 1 2 3 4 5 6]

test sort-1 {sortmap operator} {
    v9 get [list sortmap [v9 ivec 9 5 3]]
} {2 1 0}

test sort-2 {sort operator} {
    v9 get [v9 sort [v9 ivec 9 5 3]]
} {3 5 9}

test sort-3 {row equal same} {
    v9 roweq $V 1 $V 1
} 1

test sort-4 {row equal not same} {
    v9 roweq $V 1 $V 2
} 0

test sort-5 {row compare equal} {
    v9 rowcmp $V 1 $V 1
} 0

test sort-6 {row compare less} {
    v9 rowcmp $V 1 $V 2
} -1

test sort-7 {row compare greater} {
    v9 rowcmp $V 1 $V 0
} 1

test sort-8 {view compare equal} {
    v9 vcmp $V $V
} 0

test sort-9 {view compare less} {
    v9 vcmp $W $V
} -1

test sort-10 {view compare greater} {
    v9 vcmp $V $W
} 1

test sort-11 {view compare shorter} {
    v9 vcmp $X $V
} -1

test sort-12 {view compare longer} {
    v9 vcmp $V $X
} 1

test sort-13 {sort operator} {
    v9 get [v9 sort [v9 ivec 9 5 3]]
} {3 5 9}

cleanup {V W X}

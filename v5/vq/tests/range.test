#!/usr/bin/env tclkit
# range tests, these require a debug build
# %renumber<^\s*test >%

source [file join [file dir [info script]] initests.tcl]

test 0 {load package} {
    package require vq
} $version

catch { vq debug version; testConstraint debug 1 }

test 1  {} debug { vq debug rflip {}        1 0 } {}
test 2  {} debug { vq debug rflip {}        1 1 } {1 2}
test 3  {} debug { vq debug rflip {}        1 2 } {1 3}
test 4  {} debug { vq debug rflip {1 3}     1 1 } {2 3}
test 5  {} debug { vq debug rflip {1 3}     1 2 } {}
test 6  {} debug { vq debug rflip {1 3}     3 2 } {1 5}
test 7  {} debug { vq debug rflip {1 3}     5 3 } {1 3 5 8}
test 8  {} debug { vq debug rflip {1 8}     3 2 } {1 3 5 8}
test 9  {} debug { vq debug rflip {5 8}     1 2 } {1 3 5 8}
test 10 {} debug { vq debug rflip {1 3 5 8} 3 1 } {1 4 5 8}
test 11 {} debug { vq debug rflip {1 3 5 8} 4 1 } {1 3 4 8}
test 12 {} debug { vq debug rflip {1 3 5 8} 3 2 } {1 8}
test 13 {} debug { vq debug rflip {1 3 5 8} 1 2 } {5 8}
test 14 {} debug { vq debug rflip {1 3 5 8} 5 3 } {1 3}
test 15 {} debug { vq debug rflip {1 3 5 8} 0 1 } {0 3 5 8}
test 16 {} debug { vq debug rflip {1 3 5 8} 8 1 } {1 3 5 9}
test 17 {} debug { vq debug rflip {1 3 5 8} 6 1 } {1 3 5 6 7 8}
test 18 {} debug { vq debug rflip {1 3 5 8} 9 0 } {1 3 5 8}
                
test 19 {} debug { vq debug rlocate {} 3} {-1 3}
test 20 {} debug { vq debug rlocate {1 2} 1} {0 0}
                
test 21 {} debug {
    set r ""
    for {set i 0} {$i < 10} {incr i} {
        lappend r $i: [join [vq debug rlocate {1 3 5 8} $i] .]
    }
    set r
} {0: -1.0 1: 0.0 2: 0.1 3: 1.1 4: 1.2 5: 2.2 6: 2.3 7: 2.4 8: 3.3 9: 3.4}

test 22 {} debug { vq debug rinsert {}        1 1 0 } {}
test 23 {} debug { vq debug rinsert {}        1 1 1 } {1 2}
test 24 {} debug { vq debug rinsert {}        1 2 0 } {}
test 25 {} debug { vq debug rinsert {}        1 2 1 } {1 3}
test 26 {} debug { vq debug rinsert {}        1 3 0 } {}
test 27 {} debug { vq debug rinsert {}        1 3 1 } {1 4}

test 28 {} debug { vq debug rinsert {1 3}     0 2 0 } {3 5}
test 29 {} debug { vq debug rinsert {1 3}     0 2 1 } {0 2 3 5}
test 30 {} debug { vq debug rinsert {1 3}     1 2 0 } {3 5}
test 31 {} debug { vq debug rinsert {1 3}     1 2 1 } {1 5}
test 32 {} debug { vq debug rinsert {1 3}     2 2 0 } {1 2 4 5}
test 33 {} debug { vq debug rinsert {1 3}     2 2 1 } {1 5}
test 34 {} debug { vq debug rinsert {1 3}     3 2 0 } {1 3}
test 35 {} debug { vq debug rinsert {1 3}     3 2 1 } {1 5}
test 36 {} debug { vq debug rinsert {1 3}     4 2 0 } {1 3}
test 37 {} debug { vq debug rinsert {1 3}     4 2 1 } {1 3 4 6}

test 38 {} debug { vq debug rinsert {1 3 5 6} 0 2 0 } {3 5 7 8}
test 39 {} debug { vq debug rinsert {1 3 5 6} 0 2 1 } {0 2 3 5 7 8}
test 40 {} debug { vq debug rinsert {1 3 5 6} 1 2 0 } {3 5 7 8}
test 41 {} debug { vq debug rinsert {1 3 5 6} 1 2 1 } {1 5 7 8}
test 42 {} debug { vq debug rinsert {1 3 5 6} 2 2 0 } {1 2 4 5 7 8}
test 43 {} debug { vq debug rinsert {1 3 5 6} 2 2 1 } {1 5 7 8}
test 44 {} debug { vq debug rinsert {1 3 5 6} 3 2 0 } {1 3 7 8}
test 45 {} debug { vq debug rinsert {1 3 5 6} 3 2 1 } {1 5 7 8}
test 46 {} debug { vq debug rinsert {1 3 5 6} 4 2 0 } {1 3 7 8}
test 47 {} debug { vq debug rinsert {1 3 5 6} 4 2 1 } {1 3 4 6 7 8}
test 48 {} debug { vq debug rinsert {1 3 5 6} 5 2 0 } {1 3 7 8}
test 49 {} debug { vq debug rinsert {1 3 5 6} 5 2 1 } {1 3 5 8}
test 50 {} debug { vq debug rinsert {1 3 5 6} 6 2 0 } {1 3 5 6}
test 51 {} debug { vq debug rinsert {1 3 5 6} 6 2 1 } {1 3 5 8}
test 52 {} debug { vq debug rinsert {1 3 5 6} 7 2 0 } {1 3 5 6}
test 53 {} debug { vq debug rinsert {1 3 5 6} 7 2 1 } {1 3 5 6 7 9}

test 54 {} debug { vq debug rdelete {}        1 2 } {}
test 55 {} debug { vq debug rdelete {1 3}     0 1 } {0 2}
test 56 {} debug { vq debug rdelete {1 3}     1 1 } {1 2}
test 57 {} debug { vq debug rdelete {1 3}     2 1 } {1 2}
test 58 {} debug { vq debug rdelete {1 3}     3 1 } {1 3}

test 59 {} debug { vq debug rdelete {1 3 5 6} 0 1 } {0 2 4 5}
test 60 {} debug { vq debug rdelete {1 3 5 6} 1 1 } {1 2 4 5}
test 61 {} debug { vq debug rdelete {1 3 5 6} 2 1 } {1 2 4 5}
test 62 {} debug { vq debug rdelete {1 3 5 6} 3 1 } {1 3 4 5}
test 63 {} debug { vq debug rdelete {1 3 5 6} 4 1 } {1 3 4 5}
test 64 {} debug { vq debug rdelete {1 3 5 6} 5 1 } {1 3}
test 65 {} debug { vq debug rdelete {1 3 5 6} 6 1 } {1 3 5 6}

test 66 {} debug { vq debug rdelete {1 3 5 6} 0 2 } {0 1 3 4}
test 67 {} debug { vq debug rdelete {1 3 5 6} 1 2 } {3 4}
test 68 {} debug { vq debug rdelete {1 3 5 6} 2 2 } {1 2 3 4}
test 69 {} debug { vq debug rdelete {1 3 5 6} 3 2 } {1 4}
test 70 {} debug { vq debug rdelete {1 3 5 6} 4 2 } {1 3}
test 71 {} debug { vq debug rdelete {1 3 5 6} 5 2 } {1 3}

test 72 {} debug { vq debug rdelete {1 3 5 6} 0 3 } {2 3}
test 73 {} debug { vq debug rdelete {1 3 5 6} 1 3 } {2 3}
test 74 {} debug { vq debug rdelete {1 3 5 6} 2 3 } {1 3}
test 75 {} debug { vq debug rdelete {1 3 5 6} 3 3 } {1 3}
test 76 {} debug { vq debug rdelete {1 3 5 6} 4 3 } {1 3}
test 77 {} debug { vq debug rdelete {1 3 5 6} 5 3 } {1 3}

test 78 {} debug { vq debug rdelete {1 3 5 6} 0 4 } {1 2}
test 79 {} debug { vq debug rdelete {1 3 5 6} 1 4 } {1 2}
test 80 {} debug { vq debug rdelete {1 3 5 6} 2 4 } {1 2}
test 81 {} debug { vq debug rdelete {1 3 5 6} 3 4 } {1 3}
test 82 {} debug { vq debug rdelete {1 3 5 6} 4 4 } {1 3}
test 83 {} debug { vq debug rdelete {1 3 5 6} 5 4 } {1 3}

test 84 {} debug { vq debug rdelete {1 3 5 6} 0 5 } {0 1}
test 85 {} debug { vq debug rdelete {1 3 5 6} 1 5 } {}
test 86 {} debug { vq debug rdelete {1 3 5 6} 2 5 } {1 2}
test 87 {} debug { vq debug rdelete {1 3 5 6} 3 5 } {1 3}
test 88 {} debug { vq debug rdelete {1 3 5 6} 4 5 } {1 3}
test 89 {} debug { vq debug rdelete {1 3 5 6} 5 5 } {1 3}

test 90 {} debug { vq debug rdelete {1 3 5 6} 0 6 } {}
test 91 {} debug { vq debug rdelete {1 3 5 6} 1 6 } {}
test 92 {} debug { vq debug rdelete {1 3 5 6} 2 6 } {1 2}
test 93 {} debug { vq debug rdelete {1 3 5 6} 3 6 } {1 3}
test 94 {} debug { vq debug rdelete {1 3 5 6} 4 6 } {1 3}
test 95 {} debug { vq debug rdelete {1 3 5 6} 5 6 } {1 3}
test 96 {} debug { vq debug rdelete {1 3 5 6} 6 6 } {1 3 5 6}

test 97  {} debug { vq debug rdelete {0 1 3 5 7 8} 0 2 } {1 3 5 6}
test 98  {} debug { vq debug rdelete {0 1 3 5 7 8} 1 2 } {0 3 5 6}
test 99  {} debug { vq debug rdelete {0 1 3 5 7 8} 2 2 } {0 1 2 3 5 6}
test 100 {} debug { vq debug rdelete {0 1 3 5 7 8} 3 2 } {0 1 5 6}
test 101 {} debug { vq debug rdelete {0 1 3 5 7 8} 2 4 } {0 1 3 4}
test 102 {} debug { vq debug rdelete {0 1 3 5 7 8} 1 6 } {0 2}

test 103 {} debug { vq debug rdelete {0 2 3 5 6 8} 0 2 } {1 3 4 6}
test 104 {} debug { vq debug rdelete {0 2 3 5 6 8} 1 2 } {0 3 4 6}
test 105 {} debug { vq debug rdelete {0 2 3 5 6 8} 2 2 } {0 3 4 6}
test 106 {} debug { vq debug rdelete {0 2 3 5 6 8} 3 2 } {0 2 4 6}
test 107 {} debug { vq debug rdelete {0 2 3 5 6 8} 2 4 } {0 4}
test 108 {} debug { vq debug rdelete {0 2 3 5 6 8} 1 6 } {0 2}

test 109 {} debug { vq debug rinsert {}    2 5 1 } {2 7}
test 110 {} debug { vq debug rdelete {2 7} 3 3   } {2 4}

::tcltest::cleanupTests

#!/usr/bin/env tclkit
# basic tests
# %renumber<^\s*test >%

source [file join [file dir [info script]] initests.tcl]

test 0 {load package} {
    package require vq
} $version

test 1 {vq command} {
    list [catch { vq ? } e] $e
} {1 {bad command "?": must be\
    all, at, debug, empty, iota, meta, new, replace, set, size, or unset}}

test 2 {all table} -body {
    vq all
} -match glob -result {data {name args} 11 {all *} {T: *}}

test 3 {missing argument} {
    list [catch { vq size } e] $e
} {1 {wrong # args: should be "vq size table"}}

test 4  {} { vq size "" } 0
test 5  {} { vq size [vq meta ""] } 3
test 6  {} { vq size 123 } 123
test 7  {} { vq size [vq all] } 11
test 8  {} { vq at [vq all] 0 0 "" } all
test 9  {} { vq at [vq all] 0 1 "" } T:
test 10 {} { vq at [vq all] 0 999999 ? } ?
test 11 {} { vq at [vq all] 999999 0 ? } ?

test 12 {} { vq iota 5 N } {data N:I 5 {0 1 2 3 4}}
test 13 {} { vq size {iota 123 N} } 123

::tcltest::cleanupTests

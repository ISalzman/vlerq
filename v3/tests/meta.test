#!/usr/bin/env tclkit
# meta view tests

source [file join [file dir [info script]] initests.tcl]

# %renumber<^\s*test >%

test 0 {load extension} {
  package require vlerq
} 3

test 1 {view command exists} -body {
  view
} -returnCodes error -result {wrong # args: should be "view v ... | ..."}

test 2 {meta view size} {
  view "" get @ #
} 3

test 3 {meta view names} {
  view "" get @ * name
} {name type subv}

test 4 {meta meta view size} {
  view "" get @ @ #
} 3

test 5 {meta meta view names} {
  view "" get @ @ * name
} {name type subv}

test 6 {meta meta meta view size} {
  view "" get @ @ @ #
} 3

test 7 {meta meta meta view names} {
  view "" get @ @ @ * name
} {name type subv}

test 8 {meta meta meta meta view size} {
  view "" get @ @ @ @ #
} 3

test 9 {meta meta meta meta view names} {
  view "" get @ @ @ @ * name
} {name type subv}

test 10 {meta meta view contents} {
  view "" get @ @ *
} {{name S {}} {type S {}} {subv V {}}}

::tcltest::cleanupTests
